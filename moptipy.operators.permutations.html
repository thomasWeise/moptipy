<!doctype html><html data-content_root=./ lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0"name=viewport><meta content="width=device-width,initial-scale=1"name=viewport><title>moptipy.operators.permutations package — moptipy 0.9.172 documentation</title><link href="/moptipy/_static/pygments.css?v=b86133f3"rel=stylesheet><link href="/moptipy/_static/bizstyle.css?v=5283bb3d"rel=stylesheet><script src="/moptipy/_static/documentation_options.js?v=ad8658f5"></script><script src="/moptipy/_static/doctools.js?v=9bcbadda"></script><script src="/moptipy/_static/sphinx_highlight.js?v=dc90522c"></script><script src=_static/bizstyle.js></script><link href=https://thomasweise.github.io/moptipy/moptipy.operators.permutations.html rel=canonical><link href=genindex.html rel=index title=Index><link href=search.html rel=search title=Search><link title="moptipy.operators.signed_permutations package"href=moptipy.operators.signed_permutations.html rel=next><link title="moptipy.operators.ordered_choices package"href=moptipy.operators.ordered_choices.html rel=prev><meta content="width=device-width,initial-scale=1.0"name=viewport><body><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"accesskey=I href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="moptipy.operators.signed_permutations package"accesskey=N href=moptipy.operators.signed_permutations.html>next</a> |<li class=right><a title="moptipy.operators.ordered_choices package"accesskey=P href=moptipy.operators.ordered_choices.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>moptipy 0.9.172 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>moptipy</a> »<li class="nav-item nav-item-2"><a href=moptipy.html>moptipy package</a> »<li class="nav-item nav-item-3"><a accesskey=U href=moptipy.operators.html>moptipy.operators package</a> »<li class="nav-item nav-item-this"><a href>moptipy.operators.permutations package</a></ul></div><div class=document><div class=documentwrapper><div class=bodywrapper><div class=body role=main><section id=module-moptipy.operators.permutations><span id=moptipy-operators-permutations-package></span><h1>moptipy.operators.permutations package<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations>¶</a></h1><p>Search operators for permutations with repetitions.<p>These operators can be used in conjunction with the space <a class="reference internal"href=moptipy.spaces.html#moptipy.spaces.permutations.Permutations title=moptipy.spaces.permutations.Permutations><code class="xref py py-class docutils literal notranslate"><span class=pre>Permutations</span></code></a>.<ul class=simple><li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op0_shuffle title=moptipy.operators.permutations.op0_shuffle><code class="xref py py-mod docutils literal notranslate"><span class=pre>op0_shuffle</span></code></a> provides a nullary operator sampling an entirely random permutation.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op1_insert1 title=moptipy.operators.permutations.op1_insert1><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_insert1</span></code></a> provides a unary operator that extracts one element and inserts it elsewhere.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap2 title=moptipy.operators.permutations.op1_swap2><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap2</span></code></a> provides a unary operator which swaps exactly two different elements of a permutation.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swapn title=moptipy.operators.permutations.op1_swapn><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swapn</span></code></a> provides a unary operator which tries to find a cyclic move whose length would be approximately binomially distributed, i.e., which may swap two elements with probability 0.5, three elements with probability 0.25, 4 elements with probability 0.125, and so on. It does so by performing a sequence of swaps but does not check whether one swap undoes a previous one.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n title=moptipy.operators.permutations.op1_swap_exactly_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_exactly_n</span></code></a> offers a unary operator with a step size (see <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1WithStepSize title=moptipy.api.operators.Op1WithStepSize><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1WithStepSize</span></code></a>). A step size of <cite>0.0</cite> means that it will swap two elements, a step size of <cite>1.0</cite> means that it tries to perform the largest-possible modification. If it is applied to permutations where each element occurs once, this means that all elements change their position. If applied to permutations with repetitions, things are more complex and some moves may be impossible, in which case a best effort is attempted.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_try_n title=moptipy.operators.permutations.op1_swap_try_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_try_n</span></code></a> is similar to the operator from <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n title=moptipy.operators.permutations.op1_swap_exactly_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_exactly_n</span></code></a>, but invests less effort into reaching the prescribed number of modifications exactly. Instead, it will accept making only fewer swaps more easily.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op2_gap title=moptipy.operators.permutations.op2_gap><code class="xref py py-mod docutils literal notranslate"><span class=pre>op2_gap</span></code></a> offers an operator that tries to build a new permutation by appending not-yet-appended elements from both input permutations, alternating between them randomly.<li><p>Module <a class="reference internal"href=#module-moptipy.operators.permutations.op2_ox2 title=moptipy.operators.permutations.op2_ox2><code class="xref py py-mod docutils literal notranslate"><span class=pre>op2_ox2</span></code></a> implements a slightly modified version of the order-based crossover operator for permutations.</ul><section id=submodules><h2>Submodules<a title="Link to this heading"class=headerlink href=#submodules>¶</a></h2></section><section id=module-moptipy.operators.permutations.op0_shuffle><span id=moptipy-operators-permutations-op0-shuffle-module></span><h2>moptipy.operators.permutations.op0_shuffle module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op0_shuffle>¶</a></h2><p>A nullary operator shuffling a permutation.<p>This operator first copies the canonical permutation to the destination string. It then applies the shuffle procedure of the random number generator, which probably internally applies a Fisher-Yates Shuffle. The result is a random permutation.<ol class="arabic simple"><li><p>Thomas Weise. <em>Optimization Algorithms.</em> 2021. Hefei, Anhui, China: Institute of Applied Optimization (IAO), School of Artificial Intelligence and Big Data, Hefei University. <a class="reference external"href=http://thomasweise.github.io/oa/>http://thomasweise.github.io/oa/</a></ol><dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op0_shuffle.Op0Shuffle><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op0_shuffle.</span></span><span class="sig-name descname"><span class=pre>Op0Shuffle</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>space</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op0_shuffle.html#Op0Shuffle><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op0_shuffle.Op0Shuffle>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op0 title=moptipy.api.operators.Op0><code class="xref py py-class docutils literal notranslate"><span class=pre>Op0</span></code></a></p> <p>Shuffle permutations randomly.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op0_shuffle.Op0Shuffle.op0><span class="sig-name descname"><span class=pre>op0</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op0_shuffle.html#Op0Shuffle.op0><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op0_shuffle.Op0Shuffle.op0>¶</a><dd><p>Copy the base string to <cite>dest</cite> and shuffle it randomly.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the permutation that should be filled with a random sequence of the base permutation.</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl></section><section id=module-moptipy.operators.permutations.op1_insert1><span id=moptipy-operators-permutations-op1-insert1-module></span><h2>moptipy.operators.permutations.op1_insert1 module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op1_insert1>¶</a></h2><p>An operator deleting an element from a permutation and inserting it elsewhere.<p>The operator is similar to a combination of the <cite>rol</cite> and <cite>ror</cite> operators in [1]. If the permutation represents, e.g., a tour in the Traveling Salesperson Problem (TSP), then a rotation replaces two edges (if two neighboring elements are rotated = swapped) or three edges (if at least three elements take part in the rotation). It may therefore be considered as a possible 3-opt move on the TSP.<p>An alternative way to look at this is given in [2, 3, 4], where the operator is called “Insertion Mutation”: An element of the permutation is removed from its current position (<cite>i1</cite>) and inserted at another position (<cite>i2</cite>). The operator is therefore called “position based mutation operator” in [5].<ol class="arabic simple"><li><p>Thomas Weise, Raymond Chiong, Ke Tang, Jörg Lässig, Shigeyoshi Tsutsui, Wenxiang Chen, Zbigniew Michalewicz, and Xin Yao. Benchmarking Optimization Algorithms: An Open Source Framework for the Traveling Salesman Problem. <em>IEEE Computational Intelligence Magazine (CIM)</em> 9(3):40-52, August 2014. <a class="reference external"href=https://doi.org/10.1109/MCI.2014.2326101>https://doi.org/10.1109/MCI.2014.2326101</a><li><p>Pedro Larrañaga, Cindy M. H. Kuijpers, Roberto H. Murga, I. Inza, and S. Dizdarevic. Genetic Algorithms for the Travelling Salesman Problem: A Review of Representations and Operators. <em>Artificial Intelligence Review,</em> 13(2):129-170, April 1999. Kluwer Academic Publishers, The Netherlands. <a class="reference external"href=https://doi.org/10.1023/A:1006529012972>https://doi.org/10.1023/A:1006529012972</a><li><p>David B. Fogel. An Evolutionary Approach to the Traveling Salesman Problem. <em>Biological Cybernetics</em> 60(2):139-144, December 1988. <a class="reference external"href=https://doi.org/10.1007/BF00202901>https://doi.org/10.1007/BF00202901</a><li><p>Zbigniew Michalewicz. <em>Genetic Algorithms + Data Structures = Evolution Programs,</em> Berlin, Germany: Springer-Verlag GmbH. 1996. ISBN:3-540-58090-5. https://doi.org/10.1007/978-3-662-03315-9<li><p>Gilbert Syswerda. Schedule Optimization Using Genetic Algorithms. In Lawrence Davis, (ed.), <em>Handbook of Genetic Algorithms,</em> pages 332-349. 1991. New York, NY, USA: Van Nostrand Reinhold.<li><p>Yuezhong Wu, Thomas Weise, and Raymond Chiong. Local Search for the Traveling Salesman Problem: A Comparative Study. In <em>Proceedings of the 14th IEEE Conference on Cognitive Informatics & Cognitive Computing (ICCI*CC’15),</em> July 6-8, 2015, Beijing, China, pages 213-220, Los Alamitos, CA, USA: IEEE Computer Society Press, ISBN: 978-1-4673-7289-3. <a class="reference external"href=https://doi.org/10.1109/ICCI-CC.2015.7259388>https://doi.org/10.1109/ICCI-CC.2015.7259388</a><li><p>Dan Xu, Thomas Weise, Yuezhong Wu, Jörg Lässig, and Raymond Chiong. An Investigation of Hybrid Tabu Search for the Traveling Salesman Problem. In <em>Proceedings of the 10th International Conference on Bio-Inspired Computing &ampmdash; Theories and Applications (BIC-TA’15),</em> September 25-28, 2015, Hefei, Anhui, China, volume 562 of Communications in Computer and Information Science. Berlin/Heidelberg: Springer-Verlag, pages 523-537, ISBN 978-3-662-49013-6. <a class="reference external"href=https://doi.org/10.1007/978-3-662-49014-3_47>https://doi.org/10.1007/978-3-662-49014-3_47</a><li><p>Weichen Liu, Thomas Weise, Yuezhong Wu, and Raymond Chiong. Hybrid Ejection Chain Methods for the Traveling Salesman Problem. In <em>Proceedings of the 10th International Conference on Bio-Inspired Computing &ampmdash; Theories and Applications (BIC-TA’15),</em> September 25-28, 2015, Hefei, Anhui, China, volume 562 of Communications in Computer and Information Science. Berlin/Heidelberg: Springer-Verlag, pages 268-282, ISBN 978-3-662-49013-6. <a class="reference external"href=https://doi.org/10.1007/978-3-662-49014-3_25>https://doi.org/10.1007/978-3-662-49014-3_25</a><li><p>Yuezhong Wu, Thomas Weise, and Weichen Liu. Hybridizing Different Local Search Algorithms with Each Other and Evolutionary Computation: Better Performance on the Traveling Salesman Problem. In <em>Proceedings of the 18th Genetic and Evolutionary Computation Conference (GECCO’16),</em> July 20-24, 2016, Denver, CO, USA, pages 57-58, New York, NY, USA: ACM. ISBN: 978-1-4503-4323-7. <a class="reference external"href=https://doi.org/10.1145/2908961.2909001>https://doi.org/10.1145/2908961.2909001</a></ol><dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_insert1.Op1Insert1><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_insert1.</span></span><span class="sig-name descname"><span class=pre>Op1Insert1</span></span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_insert1.html#Op1Insert1><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_insert1.Op1Insert1>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1 title=moptipy.api.operators.Op1><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1</span></code></a></p> <p>Delete an element from a permutation and insert it elsewhere.</p> <p>This operation keep drawing to random numbers, <cite>i1</cite> and <cite>i2</cite>. If <cite>i1 < i2</cite>, then the permutation is rotated one step to the left between <cite>i1</cite> and <cite>i2</cite>. If <cite>i1 > i2</cite>, then it is rotated one step to the right between <cite>i1</cite> and <cite>i2</cite>. If the permutation has changed, the process is stopped. This corresponds to extracting the element at index <cite>i1</cite> and re-inserting it at index <cite>i2</cite>. This operator also works for permutations with repetitions.</p></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_insert1.rotate><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_insert1.</span></span><span class="sig-name descname"><span class=pre>rotate</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_insert1.html#rotate><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_insert1.rotate>¶</a><dd><p>Copy <cite>x</cite> into <cite>dest</cite> and then rotate a subsequence by one step.</p> <p>The function repeatedly tries to rotate a portion of an array to the left or right in place. It will continue trying until something changed. In each step, it draws two indices <cite>i1</cite> and <cite>i2</cite>.</p> <p>If <cite>i1 < i2</cite>, then a left rotation by one step is performed. In other words, the element at index <cite>i1 + 1</cite> goes to index <cite>i1</cite>, the element at index <cite>i1 + 2</cite> goes to index <cite>i1 + 1</cite>, and so on. The lst element, i.e., the one at index <cite>i2</cite> goes to index <cite>i2 - 1</cite>. Finally, the element that originally was at index <cite>i1</cite> goes to index <cite>i2</cite>. If any element in the array has changed, this function is done, otherwise it tries again.</p> <p>If <cite>i1 > i2</cite>, then a right rotation by one step is performed. In other words, the element at index <cite>i1 - 1</cite> goes to index <cite>i1</cite>, the element at index <cite>i1 - 2</cite> goes to index <cite>i1 - 1</cite>, and so on. Finally, the element that originally was at index <cite>i1</cite> goes to index <cite>i2</cite>. If any element in the array has changed, this function tries again, otherwise it stops.</p> <p>This corresponds to extracting the element at index <cite>i1</cite> and re-inserting it at index <cite>i2</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the modified copy of <cite>x</cite><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the existing point in the search space</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>rand</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>default_rng</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>rotate</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 2 3 4 5 6 8 9 7]</span>
<span class=gp>>>> </span><span class=n>rotate</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 2 3 4 5 6 8 7 9]</span>
<span class=gp>>>> </span><span class=n>rotate</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 5 1 2 3 4 6 7 8 9]</span>
<span class=gp>>>> </span><span class=n>rotate</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 2 3 4 8 5 6 7 9]</span>
</pre></div></div></dl></section><section id=module-moptipy.operators.permutations.op1_swap2><span id=moptipy-operators-permutations-op1-swap2-module></span><h2>moptipy.operators.permutations.op1_swap2 module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op1_swap2>¶</a></h2><p>An operator swapping two elements in a permutation.<p>This is a unary search operator which first copies the source string <cite>x</cite> to the destination string <cite>dest</cite>. Then it draws an index <cite>i1</cite> randomly. It keeps drawing a second random index <cite>i2</cite> until <cite>dest[i1] != dest[i2]</cite>, i.e., until the elements at the two indices are different. This will always be true for actual permutations if <cite>i1 != i2</cite>, but for permutations with repetitions, even if <cite>i1 != i2</cite>, sometimes <cite>dest[i1] == dest[i2]</cite>. Anyway, as soon as the elements at <cite>i1</cite> and <cite>i2</cite> are different, they will be swapped.<p>This operator is very well-known for permutations and has been used by many researchers, e.g., for the Traveling Salesperson Problem (TSP). In the papers by Larrañaga et al. (1999) and Banzhaf (1990), it is called “Exchange Mutation.” It is also referred to as the “swap mutation” (Oliver et al. 1987), point mutation operator (Ambati et al. 1991), the reciprocal exchange mutation operator (Michalewicz 1992), or the order based mutation operator by Syswerda (1991).<ol class="arabic simple"><li><p>Pedro Larrañaga, Cindy M. H. Kuijpers, Roberto H. Murga, I. Inza, and S. Dizdarevic. Genetic Algorithms for the Travelling Salesman Problem: A Review of Representations and Operators. <em>Artificial Intelligence Review,</em> 13(2):129-170, April 1999. Kluwer Academic Publishers, The Netherlands. <a class="reference external"href=https://doi.org/10.1023/A:1006529012972>https://doi.org/10.1023/A:1006529012972</a><li><p>Wolfgang Banzhaf. The “Molecular” Traveling Salesman. <em>Biological Cybernetics</em>, 64(1):7-14, November 1990, <a class="reference external"href=https://doi.org/10.1007/BF00203625>https://doi.org/10.1007/BF00203625</a><li><p>I.M. Oliver, D.J. Smith, and J.R.C. Holland. A Study of Permutation Crossover Operators on the Traveling Salesman Problem. In <em>Proceedings of the Second International Conference on Genetic Algorithms and their Application</em> (ICGA’87), October 1987, pages 224-230, <a class="reference external"href=https://dl.acm.org/doi/10.5555/42512.42542>https://dl.acm.org/doi/10.5555/42512.42542</a><li><p>Balamurali Krishna Ambati, Jayakrishna Ambati, and Mazen Moein Mokhtar. Heuristic Combinatorial Optimization by Simulated Darwinian Evolution: A Polynomial Time Algorithm for the Traveling Salesman Problem. <em>Biological Cybernetics,</em> 65(1):31-35, May 1991, <a class="reference external"href=https://doi.org/10.1007/BF00197287>https://doi.org/10.1007/BF00197287</a><li><p>Zbigniew Michalewicz. <em>Genetic Algorithms + Data Structures = Evolution Programs,</em> Berlin, Germany: Springer-Verlag GmbH. 1996. ISBN:3-540-58090-5. https://doi.org/10.1007/978-3-662-03315-9<li><p>Gilbert Syswerda. Schedule Optimization Using Genetic Algorithms. In Lawrence Davis, (ed.), <em>Handbook of Genetic Algorithms,</em> pages 332-349. 1991. New York, NY, USA: Van Nostrand Reinhold.<li><p>Thomas Weise. <em>Optimization Algorithms.</em> 2021. Hefei, Anhui, China: Institute of Applied Optimization (IAO), School of Artificial Intelligence and Big Data, Hefei University. <a class="reference external"href=http://thomasweise.github.io/oa/>http://thomasweise.github.io/oa/</a></ol><p>This operator performs one swap. It is similar to <a class="reference internal"href=#moptipy.operators.permutations.op1_swapn.Op1SwapN title=moptipy.operators.permutations.op1_swapn.Op1SwapN><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1SwapN</span></code></a>, which performs a random number of swaps.<dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap2.Op1Swap2><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap2.</span></span><span class="sig-name descname"><span class=pre>Op1Swap2</span></span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap2.html#Op1Swap2><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap2.Op1Swap2>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1 title=moptipy.api.operators.Op1><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1</span></code></a></p> <p>A unary search operation that swaps two (different) elements.</p> <p>In other words, it performs exactly one swap on a permutation. It spans a neighborhood of a rather limited size but is easy and fast.</p></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap2.swap_2><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap2.</span></span><span class="sig-name descname"><span class=pre>swap_2</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap2.html#swap_2><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap2.swap_2>¶</a><dd><p>Copy <cite>x</cite> into <cite>dest</cite> and swap two different values in <cite>dest</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the modified copy of <cite>x</cite><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the existing point in the search space</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>rand</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>default_rng</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>swap_2</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 2 3 4 5 6 9 8 7]</span>
<span class=gp>>>> </span><span class=nb>int</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>out</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>2</span>
<span class=gp>>>> </span><span class=n>swap_2</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 7 3 4 5 6 2 8 9]</span>
<span class=gp>>>> </span><span class=nb>int</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>out</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>2</span>
<span class=gp>>>> </span><span class=n>swap_2</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 2 3 4 8 6 7 5 9]</span>
<span class=gp>>>> </span><span class=nb>int</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>out</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>2</span>
</pre></div></div></dl></section><section id=module-moptipy.operators.permutations.op1_swap_exactly_n><span id=moptipy-operators-permutations-op1-swap-exactly-n-module></span><h2>moptipy.operators.permutations.op1_swap_exactly_n module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op1_swap_exactly_n>¶</a></h2><p>An operator trying to change exactly <cite>n</cite> elements in a permutation.<p>This is an operator with a step size (<a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1WithStepSize title=moptipy.api.operators.Op1WithStepSize><code class="xref py py-class docutils literal notranslate"><span class=pre>moptipy.api.operators.Op1WithStepSize</span></code></a>) and the step size determines how many elements of a permutation should be changed. If you are working on permutations without repetitions, the operator in <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_try_n title=moptipy.operators.permutations.op1_swap_try_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_try_n</span></code></a> is the better and faster choice. On normal permutations, it will be equivalent to <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n title=moptipy.operators.permutations.op1_swap_exactly_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_exactly_n</span></code></a>, but faster. On Permutations with repetitions, it will still be faster but less precisely enforces the number of swaps.<p>Let’s say we have a “normal” permutation where each element occurs once. The permutation has length <cite>n</cite>, let’s say that its <a class="reference internal"href=moptipy.spaces.html#moptipy.spaces.permutations.Permutations.blueprint title=moptipy.spaces.permutations.Permutations.blueprint><code class="xref py py-attr docutils literal notranslate"><span class=pre>blueprint</span></code></a> is <cite>[0, 1, 2, 3, 4, …, n-1]</cite>. Then, with one application of the operator, we can change no less than two elements (<cite>step_size=0.0</cite>) and no more than <cite>n</cite> (<cite>step_size=1.0</cite>). Clearly we cannot change only one element, because what different value could we put there? We would violate the “permutation nature.” We can also not change more than <cite>n</cite> elements, obviously.<p>What our operator does is then it computes <cite>m</cite> by using <a class="reference internal"href=moptipy.operators.html#moptipy.operators.tools.exponential_step_size title=moptipy.operators.tools.exponential_step_size><code class="xref py py-func docutils literal notranslate"><span class=pre>exponential_step_size()</span></code></a>. This ensures that <cite>m=2</cite> for <cite>step_size=0.0</cite> and <cite>m</cite> is maximal for <cite>step_size=1.0</cite>. In between the two, it extrapolates exponentially. This means that small values of <cite>step_size</cite> will lead to few swap moves, regardless of the length of the permutation and many swaps are performed only for <cite>step_size</cite> values close to <cite>1</cite>. Then it will pick <cite>m</cite> random indices and permute the elements at them such that none remains at its current position. That is rather easy to do. Unfortunately, <a class="reference internal"href=moptipy.spaces.html#moptipy.spaces.permutations.Permutations title=moptipy.spaces.permutations.Permutations><code class="xref py py-class docutils literal notranslate"><span class=pre>Permutations</span></code></a> allows also permutations with repetitions. Here, things get dodgy.<p>Let’s say we have the blueprint <cite>[0, 1, 1, 1, 1]</cite>. Then we can only change exactly two elements.<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>get_max_changes</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=go>2</span>
</pre></div></div><p>If we have the blueprint <cite>[0, 0, 1, 1, 1]</cite>, then we can change two elements. We can also change four elements. But there is no way to change three elements!<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>get_max_changes</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=go>4</span>
</pre></div></div><p>So in the general case, we determine the maximum number <cite>mx</cite> of positions that can be changed with one move via the function <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes title=moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes><code class="xref py py-func docutils literal notranslate"><span class=pre>get_max_changes()</span></code></a>. We can still translate a <cite>step_size</cite> to a number <cite>m</cite> by doing <cite>m = 2 + int(round(step_size * (mx - 2)))</cite>. However, it is not clear whether all moves from <cite>m=2</cite> to <cite>m=mx</cite> are actually possible.<p>And even if they are possible, they might be very hard to sample randomly. Some moves touching a large number <cite>m</cite> of positions may be restricted to swap the elements at very specific indicies in a very specific order. Finding such a move by chance may be rather unlikely.<p>Indeed, a search operator should do random moves. I did not find a way to construct moves according to a policy which is both random and can yield any move. So I divide the operator into two steps:<p>First, the function <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a> tries to find a move for a given <cite>m</cite> in a random fashion. This function tries to find the sequence of indices for a cyclic swap where each element is different from both its successor and predecessor. It builds such index sequences iteratively. This may fail: as in the example above, for some values of <cite>m</cite> it might just not be possible to construct a suitable sequence, either because there is none or because building it randomly has too low of a chance of success. Hence, the function tries to build at most <cite>max_trials</cite> sequences. Whenever building a sequence, it also remembers the longest-so-far cyclic move. If that one is shorter than <cite>m</cite> but all <cite>max_trials</cite> trials are exhausted, it returns this sequence instead. So in summary, this function tries to find the longest cyclic swap which is not longer than <cite>m</cite> and returns it. It may be shorter than <cite>m</cite>. If we deal with permutations where each value occurs only once, this function is guaranteed to find a sequence of length <cite>m</cite> in the first trial, i.e., it does not waste runtime.<p>Once a move was found, the function <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.apply_move title=moptipy.operators.permutations.op1_swap_exactly_n.apply_move><code class="xref py py-func docutils literal notranslate"><span class=pre>apply_move()</span></code></a> applies it. Now, as said, <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a> discovers cyclic changes that are reasonably random. However, cyclic changes are not the only possible moves of length <cite>m</cite>. For example, if we have the permutation blueprint <cite>[0, 1, 2, 3, 4]</cite>, a move of length 4 could be to exchange <cite>0</cite> with <cite>1</cite> and to swap <cite>2</cite> with <cite>3</cite>. <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a> cannot find this move, but it could find a cyclic swap of <cite>0</cite> to <cite>1</cite>, <cite>1</cite> to <cite>2</cite>, <cite>2</cite> to <cite>3</cite>, and <cite>3</cite> to <cite>1</cite>. So it could find the right indices for such a move, just restricted to the cyclic swapping. So what <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.apply_move title=moptipy.operators.permutations.op1_swap_exactly_n.apply_move><code class="xref py py-func docutils literal notranslate"><span class=pre>apply_move()</span></code></a> tries to do is to permute the indices discovered by <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a> randomly and check whether this would still yield a feasible move changing exactly <cite>m</cite> locations. Any shuffling of the elements at the selected position which avoids putting the original values into the original positions would do. Sometimes, most such shuffles work out, e.g., if we work on the space of permutations where each element occurs once. Sometimes, the only sequence that works is indeed the cyclic move and shuffling it cannot work. So <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.apply_move title=moptipy.operators.permutations.op1_swap_exactly_n.apply_move><code class="xref py py-func docutils literal notranslate"><span class=pre>apply_move()</span></code></a> again has a limit for the maximum number of attempts to find a shuffle that works out. If it finds one, then it applies it as move. If it does not find one and the trials are exhausted, it randomly choses whether to apply the cyclic move as a cycle to the left or as a cycle to the right. Either way, it will change exactly <cite>m</cite> positions of the permutation, as prescribed by the move. Cycling one step in either direction will always work, since each element is different from both its predecessor and successor. (Cycling more than one step (but less than <cite>m</cite>) could potentially fail in permutations with repetitions, because there is no guarantee that any element is different from its successor’s successor.)<p>Now the overall operator just plugs these two functions together. It also adds one slight improvement: If we demand to change a number <cite>q</cite> of locations for the first time and <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a> fails to find a move of length <cite>q</cite> but instead offers one of length <cite>p&LTq</cite>, then the operator remembers this. The next time we ask to change <cite>q</cite> positions, it will directly try to change only <cite>p</cite>. This memory is reset in <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.initialize title=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.initialize><code class="xref py py-meth docutils literal notranslate"><span class=pre>initialize()</span></code></a>.<p>A similar but much more light-weight and faster operator is given in <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_try_n title=moptipy.operators.permutations.op1_swap_try_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_try_n</span></code></a>. That operator also tries to perform a given number of swaps, but puts in much less effort to achieve this goal, i.e., it will only perform a single attempt.<dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap_exactly_n.</span></span><span class="sig-name descname"><span class=pre>Op1SwapExactlyN</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>perm</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_move_trials</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>1000</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_apply_trials</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>1000</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#Op1SwapExactlyN><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1WithStepSize title=moptipy.api.operators.Op1WithStepSize><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1WithStepSize</span></code></a></p> <p>A unary search operator that swaps <cite>n</cite> (different) elements.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.initialize><span class="sig-name descname"><span class=pre>initialize</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#Op1SwapExactlyN.initialize><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.initialize>¶</a><dd><p>Initialize this operator.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#Op1SwapExactlyN.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.log_parameters_to>¶</a><dd><p>Log the parameters of this operator to the given logger.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference internal"href=moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection title=moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_apply_trials><span class="sig-name descname"><span class=pre>max_apply_trials</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_apply_trials>¶</a><dd><p>the maximum number of attempts to apply a random permutation of the move before giving up and applying it as cyclic swap</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_changes><span class="sig-name descname"><span class=pre>max_changes</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_changes>¶</a><dd><p>the maximum number of possible changes</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_move_trials><span class="sig-name descname"><span class=pre>max_move_trials</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_move_trials>¶</a><dd><p>the maximum number of attempts to find a move with the exact step size</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.op1><span class="sig-name descname"><span class=pre>op1</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>step_size</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>0.0</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#Op1SwapExactlyN.op1><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.op1>¶</a><dd><p>Copy <cite>x</cite> into <cite>dest</cite> and then swap several different values.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the modified copy of <cite>x</cite><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the existing point in the search space<li><p><strong>step_size</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>0.0</span></code>) – the number of elements to swap</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.apply_move><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap_exactly_n.</span></span><span class="sig-name descname"><span class=pre>apply_move</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>move</span></span></em>, <em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_trials</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#apply_move><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.apply_move>¶</a><dd><p>Apply a given move copying from source <cite>x</cite> to <cite>dest</cite>.</p> <p><cite>move</cite> must be the return value of <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the source permutation<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the destination permutation<li><p><strong>move</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the move of length <cite>step_size</cite><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>max_trials</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – a maximum number of trials</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>npx</span>
<span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>numpy.random</span><span class=w> </span><span class=kn>import</span> <span class=n>default_rng</span>
<span class=gp>>>> </span><span class=n>rand</span> <span class=o>=</span> <span class=n>default_rng</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>dd</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>mv</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>5</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>mv</span><span class=p>))</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>apply_move</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=n>dd</span><span class=p>,</span> <span class=n>mv</span><span class=p>,</span> <span class=n>rand</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>dd</span><span class=p>)</span>
<span class=go>[3 3 3 3 0 2 3 3 1]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>dd</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>apply_move</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=n>dd</span><span class=p>,</span> <span class=n>mv</span><span class=p>,</span> <span class=n>rand</span><span class=p>,</span> <span class=mi>1000</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>dd</span><span class=p>)</span>
<span class=go>[3 3 3 3 2 1 3 3 0]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>dd</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>7</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>dd</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>mv</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>mv</span><span class=p>))</span>
<span class=go>8</span>
<span class=gp>>>> </span><span class=n>apply_move</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=n>dd</span><span class=p>,</span> <span class=n>mv</span><span class=p>,</span> <span class=n>rand</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>dd</span><span class=p>)</span>
<span class=go>[ 4  9  7  2 11  1  5  3]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>dd</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>8</span>
<span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>7</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>apply_move</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=n>dd</span><span class=p>,</span> <span class=n>mv</span><span class=p>,</span> <span class=n>rand</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>dd</span><span class=p>)</span>
<span class=go>[ 5  4  2 11  7  3  9  1]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>dd</span> <span class=o>!=</span> <span class=n>xx</span><span class=p>))</span>
<span class=go>8</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.find_move><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap_exactly_n.</span></span><span class="sig-name descname"><span class=pre>find_move</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>indices</span></span></em>, <em class=sig-param><span class=n><span class=pre>step_size</span></span></em>, <em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_trials</span></span></em>, <em class=sig-param><span class=n><span class=pre>temp</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#find_move><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move>¶</a><dd><p>Find a move of at most step_size changes and store it in indices.</p> <p>For any pure permutation <cite>x</cite>, we can basically find any move between <cite>step_size=2</cite> and <cite>len(x)</cite>. If we have permutations with repetitions, the upper limit becomes smaller, because it may not be possible to change all elements at once. For example, in <cite>[0, 0, 1, 1, 1, 1, 1]</cite>, we can change at most four elements. For this purpose, <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes title=moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes><code class="xref py py-func docutils literal notranslate"><span class=pre>get_max_changes()</span></code></a> exists. It tells us the upper limit of changes, which would be four here:</p> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>get_max_changes</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=go>4</span>
</pre></div></div> <p>Yet, this does not necessarily mean that we can make all moves including 2, 3, and 4 changes. If you look at the above example, you may find that it is impossible to change exactly 3 locations. We can only actually do step sizes of 2 and 4, but neither 3 nor 5, 6, nor 7. In reality, even if it was possible to make a big move, it might be very unlikely to be able to this in a <em>random</em> fashion. If you look at the code of <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes title=moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes><code class="xref py py-func docutils literal notranslate"><span class=pre>get_max_changes()</span></code></a>, it tries to find the longest possible cyclic move by working through the elements of the permutation in a very specific order. Using a different (or random) order would yield shorter moves.</p> <p>Our method <a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move title=moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="xref py py-func docutils literal notranslate"><span class=pre>find_move()</span></code></a> here therefore tries to find the longest possible cyclic swap involving at most <cite>step_size</cite> indices. It may find such a move that uses exactly <cite>step_size</cite> indices. But it may also find a shorter move because either the perfect complete feasible move touching <cite>step_size</cite> indices does not exist or because finding it in a random fashion may take too long. (For this purpose, <cite>max_trials</cite> exists to limit the search for the right move.)</p> <p>For normal permutations, it will find the move of exactly the right length. For permutations with repetitions, it has a decent chance to find a move of the length <cite>step_size</cite> if a) such a move exists and b) <cite>step_size</cite> is not too big. Otherwise, it should find a shorter but still reasonably large move.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the permutation to be modified in the end<li><p><strong>indices</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the set of indices, which must be the canonical permutation of <cite>0…len(x)-1</cite><li><p><strong>step_size</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the step size, i.e., the number of elements to change<li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>max_trials</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the maximum number of trials<li><p><strong>temp</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – a temporary array</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the discovered move</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>npx</span>
<span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>numpy.random</span><span class=w> </span><span class=kn>import</span> <span class=n>default_rng</span>
<span class=gp>>>> </span><span class=n>gen</span> <span class=o>=</span> <span class=n>default_rng</span><span class=p>(</span><span class=mi>12</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>perm</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>use_indices</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>perm</span><span class=p>)),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>want_size</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>perm</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>want_size</span><span class=p>)</span>
<span class=go>9</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>get_max_changes</span><span class=p>(</span><span class=n>perm</span><span class=p>))</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>use_temp</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>perm</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>find_move</span><span class=p>(</span><span class=n>perm</span><span class=p>,</span> <span class=n>use_indices</span><span class=p>,</span> <span class=n>want_size</span><span class=p>,</span> <span class=n>gen</span><span class=p>,</span> <span class=mi>1000</span><span class=p>,</span> <span class=n>use_temp</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>[5 2 8 1 4 0]</span>
<span class=gp>>>> </span><span class=n>perm2</span> <span class=o>=</span> <span class=n>perm</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>perm2</span><span class=p>[</span><span class=n>res</span><span class=p>]</span> <span class=o>=</span> <span class=n>perm2</span><span class=p>[</span><span class=n>npx</span><span class=o>.</span><span class=n>roll</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=mi>1</span><span class=p>)]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>perm</span><span class=si>}</span><span class=s2> vs. </span><span class=si>{</span><span class=n>perm2</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>[0 1 2 3 3 3 3 3 3] vs. [3 3 3 3 1 0 3 3 2]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>perm</span> <span class=o>!=</span> <span class=n>perm2</span><span class=p>))</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>perm</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>7</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>want_size</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>perm</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>want_size</span><span class=p>)</span>
<span class=go>8</span>
<span class=gp>>>> </span><span class=n>use_indices</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>perm</span><span class=p>)),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>use_temp</span> <span class=o>=</span> <span class=n>npx</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>perm</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>find_move</span><span class=p>(</span><span class=n>perm</span><span class=p>,</span> <span class=n>use_indices</span><span class=p>,</span> <span class=n>want_size</span><span class=p>,</span> <span class=n>gen</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>use_temp</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>[4 0 5 3 1 7 2 6]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>res</span><span class=p>))</span>
<span class=go>8</span>
<span class=gp>>>> </span><span class=n>perm2</span> <span class=o>=</span> <span class=n>perm</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>perm2</span><span class=p>[</span><span class=n>res</span><span class=p>]</span> <span class=o>=</span> <span class=n>perm2</span><span class=p>[</span><span class=n>npx</span><span class=o>.</span><span class=n>roll</span><span class=p>(</span><span class=n>res</span><span class=p>,</span> <span class=mi>1</span><span class=p>)]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>perm</span><span class=si>}</span><span class=s2> vs. </span><span class=si>{</span><span class=n>perm2</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>[ 1  3  5  9  4  2 11  7] vs. [ 4  9  7  2 11  1  5  3]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>perm</span> <span class=o>!=</span> <span class=n>perm2</span><span class=p>))</span>
<span class=go>8</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap_exactly_n.</span></span><span class="sig-name descname"><span class=pre>get_max_changes</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>blueprint</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_exactly_n.html#get_max_changes><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes>¶</a><dd><p>Get the maximum number of changes possible for a given permutation.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>blueprint</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a>]</span>) – the blueprint permutation</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the maximum number of changes possible</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1"</span><span class=p>)</span>
<span class=go>0</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"11"</span><span class=p>)</span>
<span class=go>0</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12"</span><span class=p>)</span>
<span class=go>2</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"123"</span><span class=p>)</span>
<span class=go>3</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1233"</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12333"</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1234"</span><span class=p>)</span>
<span class=go>4</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12344"</span><span class=p>)</span>
<span class=go>5</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"123444"</span><span class=p>)</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1234444"</span><span class=p>)</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12334444"</span><span class=p>)</span>
<span class=go>8</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"123344445"</span><span class=p>)</span>
<span class=go>9</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1233444455"</span><span class=p>)</span>
<span class=go>10</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12334444555"</span><span class=p>)</span>
<span class=go>11</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"123344445555"</span><span class=p>)</span>
<span class=go>12</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1233444455555"</span><span class=p>)</span>
<span class=go>13</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12334444555555"</span><span class=p>)</span>
<span class=go>14</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"123344445555555"</span><span class=p>)</span>
<span class=go>15</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1233444455555555"</span><span class=p>)</span>
<span class=go>16</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"12334444555555555"</span><span class=p>)</span>
<span class=go>16</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"112233"</span><span class=p>)</span>
<span class=go>6</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"11223344"</span><span class=p>)</span>
<span class=go>8</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"112233445"</span><span class=p>)</span>
<span class=go>9</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1122334455"</span><span class=p>)</span>
<span class=go>10</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"11223344555"</span><span class=p>)</span>
<span class=go>11</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"112233445555555"</span><span class=p>)</span>
<span class=go>15</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"1122334455555555"</span><span class=p>)</span>
<span class=go>16</span>
<span class=gp>>>> </span><span class=n>get_max_changes</span><span class=p>(</span><span class=s2>"11223344555555555"</span><span class=p>)</span>
<span class=go>16</span>
</pre></div></div></dl></section><section id=module-moptipy.operators.permutations.op1_swap_try_n><span id=moptipy-operators-permutations-op1-swap-try-n-module></span><h2>moptipy.operators.permutations.op1_swap_try_n module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op1_swap_try_n>¶</a></h2><p>An operator trying to swap a given number of elements in a permutation.<p>This operator is similar to <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n title=moptipy.operators.permutations.op1_swap_exactly_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_exactly_n</span></code></a> in that it tries to swap a fixed number of elements in a permutation. It implements the <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1WithStepSize title=moptipy.api.operators.Op1WithStepSize><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1WithStepSize</span></code></a> interface. Different from <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n title=moptipy.operators.permutations.op1_swap_exactly_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_exactly_n</span></code></a>, however, it does so less strictly. It applies a simple best-effort approach and if that does not work out, then so be it. It is therefore faster, but adheres less strictly to the give <cite>step_size</cite>.<p>This operator will always swap the right number of elements on normal permutations. On permutations with repetitions, it enforces the number of swaps less strongly compared to <a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n title=moptipy.operators.permutations.op1_swap_exactly_n><code class="xref py py-mod docutils literal notranslate"><span class=pre>op1_swap_exactly_n</span></code></a>, but it will be faster either way.<dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap_try_n.</span></span><span class="sig-name descname"><span class=pre>Op1SwapTryN</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>perm</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_try_n.html#Op1SwapTryN><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1WithStepSize title=moptipy.api.operators.Op1WithStepSize><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1WithStepSize</span></code></a></p> <p>An operator trying to swap a given number of elements.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN.initialize><span class="sig-name descname"><span class=pre>initialize</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_try_n.html#Op1SwapTryN.initialize><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN.initialize>¶</a><dd><p>Initialize this operator.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN.op1><span class="sig-name descname"><span class=pre>op1</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>step_size</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>0.0</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_try_n.html#Op1SwapTryN.op1><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN.op1>¶</a><dd><p>Copy <cite>x</cite> into <cite>dest</cite> and then swap several different values.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the modified copy of <cite>x</cite><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the existing point in the search space<li><p><strong>step_size</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>0.0</span></code>) – the number of elements to swap</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swap_try_n.swap_try_n><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swap_try_n.</span></span><span class="sig-name descname"><span class=pre>swap_try_n</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>step_size</span></span></em>, <em class=sig-param><span class=n><span class=pre>indices</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swap_try_n.html#swap_try_n><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swap_try_n.swap_try_n>¶</a><dd><p>Copy <cite>x</cite> into <cite>dest</cite> and then swap several different values.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the modified copy of <cite>x</cite><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the existing point in the search space<li><p><strong>step_size</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the number of elements to swap<li><p><strong>indices</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array with indices</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=n>xx</span><span class=o>.</span><span class=n>dtype</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>idxs</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>)),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>gen</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>default_rng</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>swap_try_n</span><span class=p>(</span><span class=n>gen</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=n>idxs</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 2 3 4 5 6 8 7 9]</span>
<span class=gp>>>> </span><span class=n>swap_try_n</span><span class=p>(</span><span class=n>gen</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>,</span> <span class=n>idxs</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 2 1 3 4 5 6 7 8 9]</span>
<span class=gp>>>> </span><span class=n>swap_try_n</span><span class=p>(</span><span class=n>gen</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=n>idxs</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[3 7 4 5 8 6 9 0 1 2]</span>
</pre></div></div></dl></section><section id=module-moptipy.operators.permutations.op1_swapn><span id=moptipy-operators-permutations-op1-swapn-module></span><h2>moptipy.operators.permutations.op1_swapn module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op1_swapn>¶</a></h2><p>An operator swapping several elements in a permutation.<p>This operator works similarly to <a class="reference internal"href=#moptipy.operators.permutations.op1_swap2.Op1Swap2 title=moptipy.operators.permutations.op1_swap2.Op1Swap2><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1Swap2</span></code></a>, but instead of swapping two elements (i.e., performing 1 swap), it will perform a random number of swaps.<p>First, the operator copies the source string <cite>x</cite> into the destination <cite>dest</cite>. It then chooses a random index <cite>i1</cite>. It remembers the element at that index in two variables, <cite>last</cite> and <cite>first</cite>. (<cite>last</cite> will always be the value of the element will next be overwritten and <cite>first</cite> will never change and remember the first overwritten element, i.e., the value that we need to store again into the array in the end.) We also initialize a variable <cite>continue_after</cite> with <cite>True</cite>. This variable will always tell us if we need to continue and draw another random index.<p>We then begin with the main loop, which is iterated as long as <cite>continue_after</cite> is <cite>True</cite>. Directly as first action in this loop, we set <cite>continue_after = ri(2) <= 0</cite>. <cite>ri(2)</cite> will return a random integer in <cite>{0, 1}</cite>. <cite>ri(2) <= 0</cite> will therefore be <cite>True</cite> with probability 0.5.<p>We now will draw a new random index <cite>i2</cite>. We load the element at index <cite>i2</cite> into variable <cite>current</cite>. If <cite>current == last</cite>, we immediately go back and draw another random <cite>i2</cite>. The reason is that we want to store <cite>current</cite> at <cite>i1</cite>, i.e., where <cite>last</cite> is currently stored. If <cite>current == last</cite>, this would change nothing. Furthermore, if <cite>continue_after</cite> is <cite>False</cite>, then <cite>current</cite> must also be different from <cite>first</cite>: If we exit the main loop, then we will store <cite>first</cite> into the place where we found <cite>current</cite>. Remember, we will overwrite the element at index <cite>i1</cite> with <cite>current</cite>, so the very first element we overwrite must eventually be stored back into the array.<p>OK, if we have obtained an index <cite>i2</cite> whose corresponding element <cite>current</cite> fulfills all requirements, we can set <cite>dest[i1] = last = current</cite>, i.e., remember <cite>current</cite> in <cite>last</cite> and also store it at index <cite>i1</cite>. Next, we will overwrite the element at index <cite>i2</cite>, so we set <cite>i1 = i2</cite>. If <cite>continue_after</cite> is <cite>True</cite>, the loop will continue. Otherwise, it will stop.<p>In the latter case, we store <cite>first</cite> back into the array at the last index <cite>i1</cite> and do <cite>dest[i1] = first</cite>.<p>As a result, the operator will swap exactly 2 elements with probability 0.5. With probability 0.25, it will swap three elements, with 0.125 probability, it will swap 4 elements, and so on.<ol class="arabic simple"><li><p>Thomas Weise. <em>Optimization Algorithms.</em> 2021. Hefei, Anhui, China: Institute of Applied Optimization (IAO), School of Artificial Intelligence and Big Data, Hefei University. <a class="reference external"href=http://thomasweise.github.io/oa/>http://thomasweise.github.io/oa/</a></ol><dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swapn.Op1SwapN><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swapn.</span></span><span class="sig-name descname"><span class=pre>Op1SwapN</span></span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swapn.html#Op1SwapN><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swapn.Op1SwapN>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op1 title=moptipy.api.operators.Op1><code class="xref py py-class docutils literal notranslate"><span class=pre>Op1</span></code></a></p> <p>A unary search operation that swaps several (different) elements.</p> <p>It is similar to <cite>swap2</cite>, but instead may perform a random number of swaps. After each swap, it decides with probability 0.5 whether or not to perform another swap.</p></dl><dl class="py function"><dt class="sig sig-object py"id=moptipy.operators.permutations.op1_swapn.swap_n><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op1_swapn.</span></span><span class="sig-name descname"><span class=pre>swap_n</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op1_swapn.html#swap_n><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op1_swapn.swap_n>¶</a><dd><p>Copy <cite>x</cite> into <cite>dest</cite> and then swap several different values.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the modified copy of <cite>x</cite><li><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the existing point in the search space</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>rand</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>default_rng</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>out</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>empty</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>swap_n</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 7 3 4 5 6 2 8 9]</span>
<span class=gp>>>> </span><span class=n>swap_n</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 1 8 3 4 5 6 7 2 9]</span>
<span class=gp>>>> </span><span class=n>swap_n</span><span class=p>(</span><span class=n>rand</span><span class=p>,</span> <span class=n>out</span><span class=p>,</span> <span class=n>xx</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>out</span><span class=p>)</span>
<span class=go>[0 5 2 3 4 8 6 7 1 9]</span>
</pre></div></div></dl></section><section id=module-moptipy.operators.permutations.op2_gap><span id=moptipy-operators-permutations-op2-gap-module></span><h2>moptipy.operators.permutations.op2_gap module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op2_gap>¶</a></h2><p>A binary operator that merges two permutations by adding elements in sequence.<p>Assume we have two permutations <cite>x0</cite> and <cite>x1</cite>. For each position <cite>i</cite> in the destination string <cite>dest</cite>, we randomly select the permutation <cite>x</cite> from which the value should come (so either <cite>x=x0</cite> or <cite>x=x1</cite>). We then store the first value not yet marked as done from <cite>x</cite> in <cite>dest[i]</cite>, mark that value as done both in <cite>x0</cite> and <cite>x1</cite>.<p>This operator may be considered as a generalized version of the Alternating Position Crossover operator (AP) for the Traveling Salesperson Problem by Larrañaga et al. (1997). The original AP operator, as described by Larrañaga et al., simply creates an offspring by selecting alternately the next element of the fist parent and the next element of the second parent, omitting the elements already present in the offspring. For example, if <cite>x0</cite> is <cite>12345678</cite> and <cite>x1</cite> is <cite>37516824</cite>, the AP operator gives the following offspring <cite>13275468</cite>. Exchanging the parents results in <cite>31725468</cite>.<p>Our generalized version randomly decides which of the two parent permutations to use each time, hopefully resulting in a greater variety of possible results. It also does not skip over a parent if its next element is already used, but instead picks the next not-yet-used element from that parent. As mnemonic for the operator, we use <cite>gap</cite>. Larrañaga et al. used <cite>AP</cite> for the version of the operator that strictly alternates between parents.<ol class="arabic simple"><li><p>Pedro Larrañaga, Cindy M. H. Kuijpers, Mikel Poza, and Roberto H. Murga. Decomposing Bayesian Networks: Triangulation of the Moral Graph with Genetic Algorithms, <em>Statistics and Computing,</em> 7(1):19-34, March 1997, <a class="reference external"href=https://doi.org/10.1023/A:1018553211613>https://doi.org/10.1023/A:1018553211613</a><li><p>Pedro Larrañaga, Cindy M. H. Kuijpers, Roberto H. Murga, Iñaki Inza, and S. Dizdarevic. Genetic Algorithms for the Travelling Salesman Problem: A Review of Representations and Operators. <em>Artificial Intelligence Review,</em> 13(2):129-170, April 1999. Kluwer Academic Publishers, The Netherlands. <a class="reference external"href=https://doi.org/10.1023/A:1006529012972>https://doi.org/10.1023/A:1006529012972</a></ol><dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op2_gap.Op2GeneralizedAlternatingPosition><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op2_gap.</span></span><span class="sig-name descname"><span class=pre>Op2GeneralizedAlternatingPosition</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>space</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op2_gap.html#Op2GeneralizedAlternatingPosition><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op2_gap.Op2GeneralizedAlternatingPosition>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op2 title=moptipy.api.operators.Op2><code class="xref py py-class docutils literal notranslate"><span class=pre>Op2</span></code></a></p> <p>A binary operator trying to preserve the value sequence.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op2_gap.Op2GeneralizedAlternatingPosition.op2><span class="sig-name descname"><span class=pre>op2</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x0</span></span></em>, <em class=sig-param><span class=n><span class=pre>x1</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op2_gap.html#Op2GeneralizedAlternatingPosition.op2><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op2_gap.Op2GeneralizedAlternatingPosition.op2>¶</a><dd><p>Apply a sequence mix from <cite>x0</cite> and <cite>x1</cite> to <cite>dest</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the result<li><p><strong>x0</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the first existing point in the search space<li><p><strong>x1</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the second existing point in the search space</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl></section><section id=module-moptipy.operators.permutations.op2_ox2><span id=moptipy-operators-permutations-op2-ox2-module></span><h2>moptipy.operators.permutations.op2_ox2 module<a title="Link to this heading"class=headerlink href=#module-moptipy.operators.permutations.op2_ox2>¶</a></h2><p>The Order-based Crossover operator.<p>Larrañaga et al. describe this operator as follows:<p>The order-based crossover operator by Syswerda (1991) selects at random several positions in a parent tour, and the order of the cities in the selected positions of this parent is imposed on the other parent. For example, consider the parents <cite>12345678</cite> and <cite>24687531</cite>. Suppose that in the second parent the second, third, and sixth positions are selected. The values in these positions are <cite>4</cite>, <cite>6</cite>, and <cite>5</cite> respectively. In the first parent these cities are present at the fourth, fifth and sixth positions. Now the offspring is equal to parent 1 except in the fourth, fifth and sixth positions: <cite>123xxx78</cite>. We add the missing cities to the offspring in the same order in which they appear in the second parent tour. This results in <cite>12346578</cite>. Exchanging the role of the first parent and the second parent gives, using the same selected positions, <cite>24387561</cite>.<p>We implement this operator such that each position has the same chance to be chosen by either parents, i.e., the total number of positions copied from the parents is binomially distributed with <cite>p=0.5</cite>, but we ensure that at least two positions are copied from either parents (as the result would otherwise necessarily equal one of the parents). We also switch the role of the two parents in our implementation.<p>As mnemonic for the operator, we use <cite>ox2</cite>, similar to Larrañaga et al., who used <cite>OX2</cite>.<ol class="arabic simple"><li><p>G. Syswerda. Schedule Optimization Using Genetic Algorithms. In Lawrence Davis, L. (ed.), <em>Handbook of Genetic Algorithms,</em> pages 332-349. New York, NY, USA: Van Nostrand Reinhold.<li><p>Pedro Larrañaga, Cindy M. H. Kuijpers, Roberto H. Murga, Iñaki Inza, and S. Dizdarevic. Genetic Algorithms for the Travelling Salesman Problem: A Review of Representations and Operators. <em>Artificial Intelligence Review,</em> 13(2):129-170, April 1999. Kluwer Academic Publishers, The Netherlands. <a class="reference external"href=https://doi.org/10.1023/A:1006529012972>https://doi.org/10.1023/A:1006529012972</a></ol><dl class="py class"><dt class="sig sig-object py"id=moptipy.operators.permutations.op2_ox2.Op2OrderBased><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipy.operators.permutations.op2_ox2.</span></span><span class="sig-name descname"><span class=pre>Op2OrderBased</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>space</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op2_ox2.html#Op2OrderBased><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op2_ox2.Op2OrderBased>¶</a><dd><p>Bases: <a class="reference internal"href=moptipy.api.html#moptipy.api.operators.Op2 title=moptipy.api.operators.Op2><code class="xref py py-class docutils literal notranslate"><span class=pre>Op2</span></code></a></p> <p>The order-based crossover operator.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op2_ox2.Op2OrderBased.initialize><span class="sig-name descname"><span class=pre>initialize</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op2_ox2.html#Op2OrderBased.initialize><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op2_ox2.Op2OrderBased.initialize>¶</a><dd><p>Initialize this operator.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipy.operators.permutations.op2_ox2.Op2OrderBased.op2><span class="sig-name descname"><span class=pre>op2</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>random</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest</span></span></em>, <em class=sig-param><span class=n><span class=pre>x0</span></span></em>, <em class=sig-param><span class=n><span class=pre>x1</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipy/operators/permutations/op2_ox2.html#Op2OrderBased.op2><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipy.operators.permutations.op2_ox2.Op2OrderBased.op2>¶</a><dd><p>Apply the order-based crossover from <cite>x0</cite> and <cite>x1</cite> to <cite>dest</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>random</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.Generator><code class="xref py py-class docutils literal notranslate"><span class=pre>Generator</span></code></a></span>) – the random number generator<li><p><strong>dest</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array to receive the result<li><p><strong>x0</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the first existing point in the search space<li><p><strong>x1</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.4)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the second existing point in the search space</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.14)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl></section></section><div class=clearer></div></div></div></div><div aria-label=Main class=sphinxsidebar role=navigation><div class=sphinxsidebarwrapper><div><h3><a href=index.html>Table of Contents</a></h3><ul><li><a class="reference internal"href=#>moptipy.operators.permutations package</a><ul><li><a class="reference internal"href=#submodules>Submodules</a><li><a class="reference internal"href=#module-moptipy.operators.permutations.op0_shuffle>moptipy.operators.permutations.op0_shuffle module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op0_shuffle.Op0Shuffle><code class="docutils literal notranslate"><span class=pre>Op0Shuffle</span></code></a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op0_shuffle.Op0Shuffle.op0><code class="docutils literal notranslate"><span class=pre>Op0Shuffle.op0()</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op1_insert1>moptipy.operators.permutations.op1_insert1 module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_insert1.Op1Insert1><code class="docutils literal notranslate"><span class=pre>Op1Insert1</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_insert1.rotate><code class="docutils literal notranslate"><span class=pre>rotate()</span></code></a></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap2>moptipy.operators.permutations.op1_swap2 module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap2.Op1Swap2><code class="docutils literal notranslate"><span class=pre>Op1Swap2</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap2.swap_2><code class="docutils literal notranslate"><span class=pre>swap_2()</span></code></a></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_exactly_n>moptipy.operators.permutations.op1_swap_exactly_n module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN</span></code></a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.initialize><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN.initialize()</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.log_parameters_to><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_apply_trials><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN.max_apply_trials</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_changes><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN.max_changes</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.max_move_trials><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN.max_move_trials</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.Op1SwapExactlyN.op1><code class="docutils literal notranslate"><span class=pre>Op1SwapExactlyN.op1()</span></code></a></ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.apply_move><code class="docutils literal notranslate"><span class=pre>apply_move()</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.find_move><code class="docutils literal notranslate"><span class=pre>find_move()</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_exactly_n.get_max_changes><code class="docutils literal notranslate"><span class=pre>get_max_changes()</span></code></a></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op1_swap_try_n>moptipy.operators.permutations.op1_swap_try_n module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN><code class="docutils literal notranslate"><span class=pre>Op1SwapTryN</span></code></a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN.initialize><code class="docutils literal notranslate"><span class=pre>Op1SwapTryN.initialize()</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_try_n.Op1SwapTryN.op1><code class="docutils literal notranslate"><span class=pre>Op1SwapTryN.op1()</span></code></a></ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swap_try_n.swap_try_n><code class="docutils literal notranslate"><span class=pre>swap_try_n()</span></code></a></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op1_swapn>moptipy.operators.permutations.op1_swapn module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swapn.Op1SwapN><code class="docutils literal notranslate"><span class=pre>Op1SwapN</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op1_swapn.swap_n><code class="docutils literal notranslate"><span class=pre>swap_n()</span></code></a></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op2_gap>moptipy.operators.permutations.op2_gap module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op2_gap.Op2GeneralizedAlternatingPosition><code class="docutils literal notranslate"><span class=pre>Op2GeneralizedAlternatingPosition</span></code></a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op2_gap.Op2GeneralizedAlternatingPosition.op2><code class="docutils literal notranslate"><span class=pre>Op2GeneralizedAlternatingPosition.op2()</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipy.operators.permutations.op2_ox2>moptipy.operators.permutations.op2_ox2 module</a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op2_ox2.Op2OrderBased><code class="docutils literal notranslate"><span class=pre>Op2OrderBased</span></code></a><ul><li><a class="reference internal"href=#moptipy.operators.permutations.op2_ox2.Op2OrderBased.initialize><code class="docutils literal notranslate"><span class=pre>Op2OrderBased.initialize()</span></code></a><li><a class="reference internal"href=#moptipy.operators.permutations.op2_ox2.Op2OrderBased.op2><code class="docutils literal notranslate"><span class=pre>Op2OrderBased.op2()</span></code></a></ul></ul></ul></ul></div><div><h4>Previous topic</h4><p class=topless><a title="previous chapter"href=moptipy.operators.ordered_choices.html>moptipy.operators.ordered_choices package</a></div><div><h4>Next topic</h4><p class=topless><a title="next chapter"href=moptipy.operators.signed_permutations.html>moptipy.operators.signed_permutations package</a></div><div aria-label="source link"role=note><h3>This Page</h3><ul class=this-page-menu><li><a href=_sources/moptipy.operators.permutations.rst.txt rel=nofollow>Show Source</a></ul></div><search id=searchbox role=search style=display:none> <h3 id=searchlabel>Quick search</h3> <div class=searchformwrapper><form action=search.html class=search><input aria-labelledby=searchlabel autocapitalize=off autocomplete=off autocorrect=off name=q spellcheck=false><input type=submit value=Go></form></div> </search><script>document.getElementById(`searchbox`).style.display=`block`;</script></div></div><div class=clearer></div></div><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="moptipy.operators.signed_permutations package"href=moptipy.operators.signed_permutations.html>next</a> |<li class=right><a title="moptipy.operators.ordered_choices package"href=moptipy.operators.ordered_choices.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>moptipy 0.9.172 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>moptipy</a> »<li class="nav-item nav-item-2"><a href=moptipy.html>moptipy package</a> »<li class="nav-item nav-item-3"><a href=moptipy.operators.html>moptipy.operators package</a> »<li class="nav-item nav-item-this"><a href>moptipy.operators.permutations package</a></ul></div><div class=footer role=contentinfo>© Copyright 2022-2026, Thomas Weise.</div>
